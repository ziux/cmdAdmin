{"code":"(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],u=0,d=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function i(t){return r.p+\"assets/js/\"+({about:\"about\"}[t]||t)+\".\"+{about:\"34995013\"}[t]+\".js\"}function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=n);var s,l=document.createElement(\"script\");l.charset=\"utf-8\",l.timeout=120,r.nc&&l.setAttribute(\"nonce\",r.nc),l.src=i(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var n=e&&(\"load\"===e.type?\"missing\":e.type),s=e&&e.target&&e.target.src;c.message=\"Loading chunk \"+t+\" failed.\\n(\"+n+\": \"+s+\")\",c.name=\"ChunkLoadError\",c.type=n,c.request=s,a[1](c)}o[t]=void 0}};var u=setTimeout((function(){s({type:\"timeout\",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r.oe=function(t){throw console.error(t),t};var l=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=c;s.push([0,\"chunk-vendors\"]),a()})({0:function(t,e,a){t.exports=a(\"56d7\")},\"034f\":function(t,e,a){\"use strict\";var n=a(\"85ec\"),o=a.n(n);o.a},\"56d7\":function(t,e,a){\"use strict\";a.r(e);a(\"e260\"),a(\"e6cf\"),a(\"cca6\"),a(\"a79d\");var n=a(\"2b0e\"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{attrs:{id:\"app\"}},[a(\"div\",{attrs:{id:\"nav\"}}),a(\"router-view\")],1)},s=[],i=(a(\"034f\"),a(\"2877\")),r={},l=Object(i[\"a\"])(r,o,s,!1,null,null,null),c=l.exports,u=(a(\"d3b7\"),a(\"8c4f\")),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"home\"},[a(\"el-row\",[a(\"el-col\",{attrs:{span:4}},[a(\"div\",[a(\"p\")])]),a(\"el-col\",{attrs:{span:16}},[a(\"div\",[a(\"task\")],1)]),a(\"el-col\",{attrs:{span:4}},[a(\"div\",[a(\"p\")])])],1)],1)},d=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[t.isShow?a(\"task-line\",{attrs:{data:t.useData},on:{closeIt:t.closeIt}}):t._e(),t.isShowOutput?a(\"Output\",{attrs:{task:t.outputTask},on:{closeOut:t.closeOut}}):t._e(),a(\"el-container\",[a(\"el-header\"),a(\"el-main\",{staticStyle:{\"text-align\":\"center\"}},[a(\"div\",{attrs:{align:\"right\"}}),a(\"div\",{attrs:{align:\"right\"}},[a(\"el-button\",{on:{click:t.init}},[t._v(\"刷新\")]),a(\"el-button\",{on:{click:function(e){t.isShow=!0}}},[t._v(\"添加\")])],1),a(\"el-table\",{staticStyle:{width:\"80%\",\"text-align\":\"center\"},attrs:{data:t.tableData}},[a(\"el-table-column\",{attrs:{prop:\"Name\",label:\"任务名称\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"UpdatedAt\",label:\"更新时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"PID\",label:\"PID\"}}),a(\"el-table-column\",{attrs:{label:\"状态\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:0===e.row.State,expression:\"scope.row.State===0\"}]},[t._v(\"未开始\")]),a(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:1===e.row.State,expression:\"scope.row.State===1\"}]},[t._v(\"进行中\")]),a(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:2===e.row.State,expression:\"scope.row.State===2\"}]},[t._v(\"已完成\")])]}}])}),a(\"el-table-column\",{attrs:{label:\"重启策略\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:1===e.row.KeepType,expression:\"scope.row.KeepType===1\"}]},[t._v(\"定时重启\"+t._s(e.row.Timing))]),a(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:2===e.row.KeepType,expression:\"scope.row.KeepType===2\"}]},[t._v(\"保持运行\")])]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[0===e.row.State||2===e.row.State?a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return t.start(e.row)}}},[t._v(\"start \")]):t._e(),1===e.row.State?a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return t.kill(e.row)}}},[t._v(\" kill \")]):t._e(),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return t.Openoutput(e.row)}}},[t._v(\"查看\")]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return t.updateTask(e.row)}}},[t._v(\"编辑\")]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return t.deleteTask(e.row)}}},[t._v(\"删除\")])]}}])})],1)],1)],1)],1)},f=[],h=(a(\"b0c0\"),a(\"25f0\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"el-dialog\",{attrs:{title:\"添加任务\",visible:t.isShow,\"before-close\":t.bfClose},on:{\"update:visible\":function(e){t.isShow=e}}},[a(\"el-form\",{attrs:{model:t.data}},[a(\"el-form-item\",{attrs:{label:\"名称\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:t.data.name,callback:function(e){t.$set(t.data,\"name\",e)},expression:\"data.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"路径\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:t.data.dir,callback:function(e){t.$set(t.data,\"dir\",e)},expression:\"data.dir\"}})],1),a(\"el-form-item\",{attrs:{label:\"命令\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:t.data.command,callback:function(e){t.$set(t.data,\"command\",e)},expression:\"data.command\"}})],1),a(\"el-form-item\",{attrs:{label:\"重启策略\",\"label-width\":t.formLabelWidth}},[[a(\"el-radio\",{attrs:{label:\"0\",value:\"0\"},model:{value:t.data.keepType,callback:function(e){t.$set(t.data,\"keepType\",e)},expression:\"data.keepType\"}},[t._v(\"没有\")]),a(\"el-radio\",{attrs:{label:\"1\",value:\"1\"},model:{value:t.data.keepType,callback:function(e){t.$set(t.data,\"keepType\",e)},expression:\"data.keepType\"}},[t._v(\"定时重启\")]),a(\"el-radio\",{attrs:{label:\"2\",value:\"2\"},model:{value:t.data.keepType,callback:function(e){t.$set(t.data,\"keepType\",e)},expression:\"data.keepType\"}},[t._v(\"保持运行\")])]],2),a(\"el-form-item\",{attrs:{label:\"定时间隔\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{autocomplete:\"off\",type:\"number\"},model:{value:t.data.timing,callback:function(e){t.$set(t.data,\"timing\",e)},expression:\"data.timing\"}})],1),a(\"el-form-item\",{attrs:{label:\"备注\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:t.data.remark,callback:function(e){t.$set(t.data,\"remark\",e)},expression:\"data.remark\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(e){return t.$emit(\"closeIt\",!1)}}},[t._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.primaryButton}},[t._v(\"确 定\")])],1)],1)],1)}),v=[],b=a(\"82ae\"),g=a.n(b),k={name:\"TaskLine\",data:function(){return{formLabelWidth:\"200px\",isShow:!0}},props:[\"data\"],methods:{primaryButton:function(){var t=this.data;t.id?this.updateTask():this.createTask()},createTask:function(){var t=this.data,e=this;g.a.post(\"http://127.0.0.1:3000/api/task\",{name:t.name,dir:t.dir,command:t.command,remark:t.remark,keepType:parseInt(t.keepType),timing:parseInt(t.timing)}).then((function(t){0===t.data.code?(console.log(t),e.messageSuccess(),e.$emit(\"closeIt\",!0)):e.messageError(t.data.msg)}))},updateTask:function(){var t=this.data,e=this;g.a.put(\"http://127.0.0.1:3000/api/task?id=\"+t.id,{dir:t.dir,command:t.command,remark:t.remark,keepType:parseInt(t.keepType),timing:parseInt(t.timing)}).then((function(t){0===t.data.code?(console.log(t),e.messageSuccess(),e.$emit(\"closeIt\",!0)):e.messageError(t.data.msg)}))},bfClose:function(t){this.$emit(\"closeIt\",!1),t()},messageSuccess:function(t){t||(t=\"操作成功\"),this.$message({message:t,type:\"success\"})},messageError:function(t){t||(t=\"操作失败\"),this.$message({message:t,type:\"warning\"})}}},w=k,y=Object(i[\"a\"])(w,h,v,!1,null,\"69247876\",null),_=y.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"el-dialog\",{attrs:{title:t.task.Name,visible:t.isShow,\"before-close\":t.bfClose,align:\"left\"},on:{\"update:visible\":function(e){t.isShow=e}}},[a(\"p\",[t._v(\"Dir:\"+t._s(t.task.Dir))]),a(\"p\",[t._v(\"Command:\"+t._s(t.task.Command))]),a(\"div\",{staticStyle:{height:\"400px\",overflow:\"auto\"}},t._l(t.dataList,(function(e,n){return a(\"p\",{key:n},[t._v(t._s(e))])})),0),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:t.deleteOutput}},[t._v(\"清空\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.init}},[t._v(\"刷新\")])],1)])],1)},T=[],x=(a(\"d81d\"),{name:\"Output\",props:[\"task\"],data:function(){return{dataList:[],isShow:!0}},methods:{bfClose:function(t){this.$emit(\"closeOut\"),t()},deleteOutput:function(){var t=this;t.confirmAction((function(){g.a.get(\"http://127.0.0.1:3000/api/task//output/delete?id=\"+t.task.ID).then((function(e){0===e.data.code?(t.messageSuccess(),t.init()):t.messageError(e.data.msg)}))}))},init:function(){var t=this;g.a.get(\"http://127.0.0.1:3000/api/task/output?id=\"+this.task.ID).then((function(e){if(0===e.data.code){var a=[];e.data.data.map((function(t){var e=\"\";2==t.Type?e+=\"info \":e+=\"error \",e+=t.UpdatedAt,e+=\" :     \",e+=t.Text,a.push(e)})),t.dataList=a}}))},messageSuccess:function(t){t||(t=\"操作成功\"),this.$message({message:t,type:\"success\"})},messageError:function(t){t||(t=\"操作失败\"),this.$message({message:t,type:\"warning\"})},confirmAction:function(t,e){e||(e=\"确认操作?\"),this.$alert(e,\"提示\",{confirmButtonText:\"确定\",callback:function(e){\"confirm\"===e&&t()}})}},created:function(){this.init()}}),O=x,$=Object(i[\"a\"])(O,S,T,!1,null,\"ed491c92\",null),D=$.exports,I={name:\"task\",components:{Output:D,TaskLine:_},data:function(){return{tableData:[{a:1,b:2}],createData:{id:\"\",name:\"\",dir:\"\",command:\"\",keepType:\"0\",timing:0,remark:\"\"},useData:{id:\"\",name:\"\",dir:\"\",command:\"\",keepType:\"0\",timing:0,remark:\"\"},isShow:!1,isShowOutput:!1,outputTask:{}}},created:function(){this.init()},methods:{closeIt:function(t){this.isShow=!1,t&&(this.messageSuccess(),this.init())},updateTask:function(t){this.useData.id=t.ID,this.useData.name=t.Name,this.useData.dir=t.Dir,this.useData.command=t.Command,this.useData.keepType=t.KeepType.toString(),this.useData.timing=t.Timing,this.useData.remark=t.Remark,console.log(this.useData),this.isShow=!0},closeOut:function(){this.isShowOutput=!1},Openoutput:function(t){this.isShowOutput=!0,this.outputTask=t},start:function(t){var e=this;e.confirmAction((function(){g.a.get(\"http://127.0.0.1:3000/api/task/start?id=\"+t.ID).then((function(t){0==t.data.code?(e.messageSuccess(),e.init()):e.messageError(t.data.msg)}))}))},kill:function(t){var e=this;e.confirmAction((function(){g.a.get(\"http://127.0.0.1:3000/api/task/kill?id=\"+t.ID).then((function(t){0==t.data.code?(e.messageSuccess(),e.init()):e.messageError(t.data.msg)}))}))},deleteTask:function(t){var e=this;e.confirmAction((function(){g.a.delete(\"http://127.0.0.1:3000/api/task?id=\"+t.ID).then((function(t){0==t.data.code?(e.messageSuccess(),e.init()):e.messageError(t.data.msg)}))}))},init:function(){var t=this;g.a.get(\"http://127.0.0.1:3000/api/task\").then((function(e){t.tableData=e.data.data}))},messageSuccess:function(t){t||(t=\"操作成功\"),this.$message({message:t,type:\"success\"})},messageError:function(t){t||(t=\"操作失败\"),this.$message({message:t,type:\"warning\"})},confirmAction:function(t,e){e||(e=\"确认操作?\"),this.$alert(e,\"提示\",{confirmButtonText:\"确定\",callback:function(e){\"confirm\"===e&&t()}})}}},E=I,j=Object(i[\"a\"])(E,m,f,!1,null,\"2a7526ab\",null),L=j.exports,C={name:\"Home\",components:{task:L}},P=C,A=Object(i[\"a\"])(P,p,d,!1,null,null,null),N=A.exports;n[\"default\"].use(u[\"a\"]);var W=[{path:\"/\",name:\"Home\",component:N},{path:\"/about\",name:\"About\",component:function(){return a.e(\"about\").then(a.bind(null,\"f820\"))}}],z=new u[\"a\"]({mode:\"hash\",base:\"\",routes:W}),K=z,B=(a(\"b9b6\"),a(\"a3c5\")),M=a.n(B);n[\"default\"].config.productionTip=!1,n[\"default\"].use(M.a),new n[\"default\"]({router:K,render:function(t){return t(c)}}).$mount(\"#app\")},\"85ec\":function(t,e,a){}});","extractedComments":[]}