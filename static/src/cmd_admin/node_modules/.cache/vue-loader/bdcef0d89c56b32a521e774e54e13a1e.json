{"remainingRequest":"I:\\workstation\\web\\cmd_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\workstation\\web\\cmd_admin\\src\\components\\TaskLine.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\workstation\\web\\cmd_admin\\src\\components\\TaskLine.vue","mtime":1590418733826},{"path":"I:\\workstation\\web\\cmd_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\workstation\\web\\cmd_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\workstation\\web\\cmd_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\workstation\\web\\cmd_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlRhc2tMaW5lIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICIyMDBweCIsCiAgICAgICAgICAgIGlzU2hvdzogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczogWydkYXRhJyxdLAogICAgbWV0aG9kczogewogICAgICAgIHByaW1hcnlCdXR0b246ZnVuY3Rpb24oKXsKICAgICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGEKICAgICAgICAgICAgaWYgKGRhdGEuaWQpewogICAgICAgICAgICB0aGlzLnVwZGF0ZVRhc2soKQogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRhc2soKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVUYXNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhCiAgICAgICAgICAgIGxldCB2dWUgPSB0aGlzCiAgICAgICAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9hcGkvdGFzaycsIHsKICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSwKICAgICAgICAgICAgICAgIGRpcjogZGF0YS5kaXIsCiAgICAgICAgICAgICAgICBjb21tYW5kOiBkYXRhLmNvbW1hbmQsCiAgICAgICAgICAgICAgICByZW1hcms6IGRhdGEucmVtYXJrLAogICAgICAgICAgICAgICAga2VlcFR5cGU6cGFyc2VJbnQoZGF0YS5rZWVwVHlwZSksCiAgICAgICAgICAgICAgICB0aW1pbmc6cGFyc2VJbnQoZGF0YS50aW1pbmcpCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGU9PT0wKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgdnVlLm1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICB2dWUuJGVtaXQoImNsb3NlSXQiLHRydWUpCiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdnVlLm1lc3NhZ2VFcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlVGFzazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YQogICAgICAgICAgICBsZXQgdnVlID0gdGhpcwogICAgICAgICAgICBheGlvcy5wdXQoJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9hcGkvdGFzaz9pZD0nK2RhdGEuaWQsIHsKICAgICAgICAgICAgICAgIGRpcjogZGF0YS5kaXIsCiAgICAgICAgICAgICAgICBjb21tYW5kOiBkYXRhLmNvbW1hbmQsCiAgICAgICAgICAgICAgICByZW1hcms6IGRhdGEucmVtYXJrLAogICAgICAgICAgICAgICAga2VlcFR5cGU6cGFyc2VJbnQoZGF0YS5rZWVwVHlwZSksCiAgICAgICAgICAgICAgICB0aW1pbmc6cGFyc2VJbnQoZGF0YS50aW1pbmcpCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGU9PT0wKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgdnVlLm1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICB2dWUuJGVtaXQoImNsb3NlSXQiLHRydWUpCiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdnVlLm1lc3NhZ2VFcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYmZDbG9zZTpmdW5jdGlvbiAoZG9uZSkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCJjbG9zZUl0IixmYWxzZSkKICAgICAgICAgICAgZG9uZSgpCgoKICAgICAgICB9LAogICAgICAgIG1lc3NhZ2VTdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIGlmICghbXNnKSB7CiAgICAgICAgICAgICAgICBtc2cgPSAn5pON5L2c5oiQ5YqfJwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgbWVzc2FnZUVycm9yOiBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIGlmICghbXNnKSB7CiAgICAgICAgICAgICAgICBtc2cgPSAn5pON5L2c5aSx6LSlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAp9Cgo="},{"version":3,"sources":["TaskLine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskLine.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <el-dialog title=\"添加任务\" :visible.sync=\"isShow\" :before-close=\"bfClose\">\r\n            <el-form :model=\"data\">\r\n                <el-form-item label=\"名称\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"data.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"路径\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"data.dir\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"命令\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"data.command\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"重启策略\" :label-width=\"formLabelWidth\">\r\n                    <template>\r\n                        <el-radio v-model=\"data.keepType\" label=\"0\" value=\"0\">没有</el-radio>\r\n                        <el-radio v-model=\"data.keepType\" label=\"1\" value=\"1\">定时重启</el-radio>\r\n                        <el-radio v-model=\"data.keepType\" label=\"2\" value=\"2\">保持运行</el-radio>\r\n                    </template>\r\n<!--                    <el-input v-model=\"data.keepType\" autocomplete=\"off\" type=\"number\"></el-input>-->\r\n                </el-form-item>\r\n                <el-form-item label=\"定时间隔\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"data.timing\" autocomplete=\"off\" type=\"number\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"data.remark\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"$emit('closeIt',false)\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"primaryButton\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    export default {\r\n        name: \"TaskLine\",\r\n        data() {\r\n            return {\r\n                formLabelWidth: \"200px\",\r\n                isShow: true\r\n            }\r\n        },\r\n        props: ['data',],\r\n        methods: {\r\n            primaryButton:function(){\r\n                let data = this.data\r\n                if (data.id){\r\n                this.updateTask()\r\n                }else {\r\n                    this.createTask()\r\n                }\r\n            },\r\n            createTask: function () {\r\n                let data = this.data\r\n                let vue = this\r\n                axios.post('http://127.0.0.1:3000/api/task', {\r\n                    name: data.name,\r\n                    dir: data.dir,\r\n                    command: data.command,\r\n                    remark: data.remark,\r\n                    keepType:parseInt(data.keepType),\r\n                    timing:parseInt(data.timing)\r\n                }).then(function (res) {\r\n                    if (res.data.code===0){\r\n                        console.log(res)\r\n                        vue.messageSuccess()\r\n                        vue.$emit(\"closeIt\",true)\r\n                    }else {\r\n                        vue.messageError(res.data.msg)\r\n                    }\r\n\r\n                })\r\n            },\r\n            updateTask: function () {\r\n                let data = this.data\r\n                let vue = this\r\n                axios.put('http://127.0.0.1:3000/api/task?id='+data.id, {\r\n                    dir: data.dir,\r\n                    command: data.command,\r\n                    remark: data.remark,\r\n                    keepType:parseInt(data.keepType),\r\n                    timing:parseInt(data.timing)\r\n                }).then(function (res) {\r\n                    if (res.data.code===0){\r\n                        console.log(res)\r\n                        vue.messageSuccess()\r\n                        vue.$emit(\"closeIt\",true)\r\n                    }else {\r\n                        vue.messageError(res.data.msg)\r\n                    }\r\n\r\n                })\r\n            },\r\n            bfClose:function (done) {\r\n                this.$emit(\"closeIt\",false)\r\n                done()\r\n\r\n\r\n            },\r\n            messageSuccess: function (msg) {\r\n                if (!msg) {\r\n                    msg = '操作成功'\r\n                }\r\n                this.$message({\r\n                    message: msg,\r\n                    type: 'success'\r\n                });\r\n            },\r\n            messageError: function (msg) {\r\n                if (!msg) {\r\n                    msg = '操作失败'\r\n                }\r\n                this.$message({\r\n                    message: msg,\r\n                    type: 'warning'\r\n                });\r\n            },\r\n        },\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}